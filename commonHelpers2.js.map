{"version":3,"file":"commonHelpers2.js","sources":["../src/js/modal-exercise.js","../src/js/filters.js"],"sourcesContent":["// import { update } from 'lodash';\nimport { ExercisesController } from '../api/controllers/ExercisesController.js'\nimport {isExerciseInFavorite} from '../helpers/locatStorage.js'\nimport {addExerciseToFavorite} from '../helpers/locatStorage.js'\nimport {removeExerciseFromFavoriteById} from '../helpers/locatStorage.js'\n\n//./api/controllers / ExercisesController.js'\n\n// import { firstLetterToUpper } from './helpers/utils.js'\nconst modalWindow = document.querySelector('.backdrop');\nconst modalEl = document.querySelector('.js-modal-container');\n\nconst closeBtn = document.querySelector('.close-btn');\nlet inputExID = '64f389465ae26083f39b17a4' //64f389465ae26083f39b17a5 //64f389465ae26083f39b188e\nlet exerciseID = '';//64f389465ae26083f39b189e\nlet exercise = {};\n\nlet exerciseCntrl = new ExercisesController();\n// let exercise = await exerciseCntrl.init();\n// let idForLocal = {};\n\n\nasync function fetchExerciseData(id) {\n  exerciseID = id;\n  const response = await exerciseCntrl.getExerciseById(exerciseID);\n  let exercise = await response.json();\n  return exercise;\n}\n \n// fetchExerciseData(exerciseID)\n\nasync function createMarkupModalEx(exerciseId) {\n  try {\n    const exercise = await fetchExerciseData(exerciseId);\n    const addFavBtn = modalEl.querySelector('.js-add-remove-btn');\n\nlet urlIconAddRemove = '';\nlet textBtn = '';\nif (exercise && isExerciseInFavorites(exercise, getFavoriteExercises())) {\n  urlIconAddRemove = './img/sprite/sprite.svg#icon-remove-favorites';\n  textBtn = 'Remove from favorites';\n} else {\n  urlIconAddRemove = './img/sprite/sprite.svg#icon-add-favorites';\n  textBtn = 'Add to favorites';\n}\n\n    modalEl.innerHTML = `<div\n        class=\"modal-ex-img-container\"\n        style=\"\n          background: linear-gradient(\n              0deg,\n              rgba(27, 27, 27, 0.2) 0%,\n              rgba(27, 27, 27, 0.2) 100%\n            ),\n            url(${exercise.gifUrl}),\n            lightgray -7.072px -25.893px / 107.482% 121.729% no-repeat;\n          background-size: cover;\n        \"\n      ></div>\n\n      <div class=\"modal-ex-text-info\">\n        <div class=\"modal-ex-name-rating-container\">\n          <h2 class=\"title-modal-exercise\">${exercise.name}</h2>\n          <div class=\"modal-ex-rating-container\">\n            <p class=\"mod-ex-rating\">${exercise.rating}</p>\n            <p class=\"mod-ex-rating-star\">\n              <svg\n                class=\"modal-icon-star\"\n                width=\"18\"\n                height=\"18\"\n                aria-label=\"modal star icon\"\n              >\n                <use\n                  href=\"./img/sprite/sprite.svg#icon-modal-rating-star\"\n                ></use>\n              </svg>\n            </p>\n            <p class=\"mod-ex-rating-star\">\n              <svg\n                class=\"modal-icon-star\"\n                width=\"18\"\n                height=\"18\"\n                aria-label=\"modal star icon\"\n              >\n                <use\n                  href=\"./img/sprite/sprite.svg#icon-modal-rating-star\"\n                ></use>\n              </svg>\n            </p>\n            <p class=\"mod-ex-rating-star\">\n              <svg\n                class=\"modal-icon-star\"\n                width=\"18\"\n                height=\"18\"\n                aria-label=\"modal star icon\"\n              >\n                <use\n                  href=\"./img/sprite/sprite.svg#icon-modal-rating-star\"\n                ></use>\n              </svg>\n            </p>\n            <p class=\"mod-ex-rating-star\">\n              <svg\n                class=\"modal-icon-star\"\n                width=\"18\"\n                height=\"18\"\n                aria-label=\"modal star icon\"\n              >\n                <use\n                  href=\"./img/sprite/sprite.svg#icon-modal-rating-star\"\n                ></use>\n              </svg>\n            </p>\n            <p class=\"mod-ex-rating-star\">\n              <svg\n                class=\"modal-icon-star\"\n                width=\"18\"\n                height=\"18\"\n                aria-label=\"modal star icon\"\n              >\n                <use\n                  href=\"./img/sprite/sprite.svg#icon-modal-rating-star\"\n                ></use>\n              </svg>\n            </p>\n          </div>\n        </div>\n\n        <div class=\"modal-ex-about-exercise-container\">\n          <ul class=\"about-exercse-list\">\n        <li>\n          <h3 class=\"title-description\">Target</h3>\n          <p class=\"value-description\">${exercise.target}</p>\n        </li>\n        <li>\n          <h3 class=\"title-description\">Body Part</h3>\n          <p class=\"value-description\">${exercise.bodyPart}</p>\n        </li>\n        <li>\n          <h3 class=\"title-description\">Equipment</h3>\n          <p class=\"value-description\">${exercise.equipment}</p>\n        </li>\n        <li>\n          <h3 class=\"title-description\">Popular</h3>\n          <p class=\"value-description\">${exercise.popularity}</p>\n        </li>\n        <li>\n          <h3 class=\"title-description\">Burned Calories</h3>\n          <p class=\"value-description\">${exercise.burnedCalories}/${exercise.time} min</p>\n        </li>\n          </ul>\n        </div>\n\n        <div class=\"modal-ex-description-text-container\">\n          <p class=\"description-text\">\n            ${exercise.description}\n          </p>\n        </div>\n\n        <div class=\"ex-modal-btn-container\">\n          <ul class=\"button ex-modal-btn-list\">\n            <li class=\"ex-modal-btn-list-item\">\n              <button class=\"ex-modal-btn add-favorite js-add-remove-btn\" type=\"button\">\n                ${textBtn}\n                <p class=\"btn-icon-add-remove-favorite\">\n                  <svg\n                    class=\"modal-icon-favorite\"\n                    width=\"18\"\n                    height=\"18\"\n                    aria-label=\"modal favorite icon\"\n                  >\n                    <use\n                      href='${urlIconAddRemove}'\n                    ></use>\n                  </svg>\n                </p>\n              </button>\n            </li>\n            <li class=\"ex-modal-btn-list-item\">\n              <button class=\"ex-modal-btn rating-btn\" type=\"button\">\n                Give a rating\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>`;\n\n  } catch (error) {\n    console.error('Error fetching or creating markup:', error);\n  }\n  \n}\n\nlet addFavBtn;\n\ncreateMarkupModalEx(inputExID);\n\n// createMarkupModalEx('64f389465ae26083f39b17a5');\n\n// ======== CLOSE MODAL WINDOW ========\n\nfunction closeModalOnEscape(event){\n    if (event.key === 'Escape') {\n      modalWindow.classList.remove('is-open');\n      window.removeEventListener('keydown', closeModalOnEscape);\n    }\n  };\n\nwindow.addEventListener('keydown', closeModalOnEscape);\n\n   function closeModalOnMouse(e) {\n    if ((e.target.classList.value === \"modal-close-icon\") || (e.target.classList.value === \"backdrop is-open\")) {\n      modalWindow.classList.remove('is-open');\n      window.removeEventListener('click', closeModalOnMouse);\n    }\n  };\n\nwindow.addEventListener('click', closeModalOnMouse);\n\n// ===============++++++++++\n\nfunction getFavoriteExercises() {\n  const storedExercisesString = localStorage.getItem('favoriteExercises');\n  return storedExercisesString ? JSON.parse(storedExercisesString) : [];\n}\nfunction updateFavoriteExercises(newExercises) {\n  localStorage.setItem('favoriteExercises', JSON.stringify(newExercises));\n}\n\nfunction isExerciseInFavorites(exercise, favoriteExercises) {\n  return favoriteExercises.some(favExercise => favExercise._id === exercise._id);\n}\n// =============== ADD TO FAVORITE ===========\n\n\n\n\nasync function toggleFavorites() {\n  try {\n    // Fetch exercise if not fetched\n    if (!exercise._id) {\n      exercise = await fetchExerciseData(exerciseID);\n    }\n\n    // Get the current array from Local Storage \n    const storedExercises = getFavoriteExercises();\n\n    // Check if the exercise is already in the favorites \n    const isFavorite = isExerciseInFavorites(exercise, storedExercises);\n\n    if (isFavorite) {\n      // Remove from favorites\n      const updatedExercises = storedExercises.filter(ex => ex._id !== exercise._id);\n      updateFavoriteExercises(updatedExercises);\n      updateButtonUI(false);\n      console.log('Exercise removed from favorites:', exercise);\n    } else {\n      // Add to favorites\n      storedExercises.push(exercise);\n      updateFavoriteExercises(storedExercises);\n      updateButtonUI(true);\n      console.log('Exercise added to favorites:', exercise);\n    }\n  } catch (error) {\n    console.error('Error toggling favorites:', error);\n  }\n}\n\n\n// -------- CLICK BUTTON \ndocument.addEventListener('click', function (event) {\n  if (event.target.classList.contains('add-favorite')) {\n    // Check if the button was clicked\n    toggleFavorites();\n  }\n});\n\n// =====================\n\n\n// ========= UPDATE BUTTON ADD TO REMOVE\nfunction updateButtonUI(isFavorite) {\n     const urlIcon = isFavorite ? './img/sprite/sprite.svg#icon-remove-favorites' : './img/sprite/sprite.svg#icon-add-favorites';\n  const textBtn = isFavorite ? 'Remove from favorites' : 'Add to favorites'\n  const updatedAddFavBtn = modalEl.querySelector('.js-add-remove-btn');\n  console.log('isFavorite', isFavorite);\n    updatedAddFavBtn.innerHTML = `<button class=\"ex-modal-btn add-favorite\" type=\"button\">${textBtn}<p class=\"btn-icon-add-remove-favorite js-add-remove-btn\"><svg class=\"modal-icon-favorite\" width=\"18\" height=\"18\" aria-label=\"modal favorite icon\"><use href='${urlIcon}'></use></svg></p></button>`;\n}\n  \n","import { firstLetterToUpper } from '../helpers/utils';\nconst filtersBox = document.querySelector('.filters-box');\nconst cardsContainer = document.getElementById('cards-list');\nconst defaultFilterButton = filtersBox.querySelector('.filters-list-item');\nconst defaultFilter = defaultFilterButton.dataset.filter;\n\nconst screenWidth = window.innerWidth;\n\nlet limit;\nlimitPerScreenWidth(screenWidth);\n\nconst defaultApiUrl = `https://energyflow.b.goit.study/api/filters?filter=${defaultFilter}&page=1&limit=${limit}`;\n\nfunction limitPerScreenWidth(screenWidth) {\n  if (screenWidth < 768) {\n    // Мобільний\n    limit = 8;\n  } else if (screenWidth >= 768 && screenWidth < 1024) {\n    // Планшет\n    limit = 12;\n  } else {\n    // Десктоп\n    limit = 12;\n  }\n  return limit;\n}\n\nasync function fetchDefaultApiUrl() {\n  try {\n    const response = await fetch(defaultApiUrl);\n    const data = await response.json();\n\n    if (data.results && data.results.length > 0) {\n      cardsContainer.innerHTML = renderCards(data.results);\n    } else {\n      console.error('No exercises found.');\n    }\n  } catch (error) {\n    console.error('Error fetching exercises:', error);\n  }\n}\n\nfunction togleActiveBtnClass(event) {\n  filtersBox.querySelectorAll('.filters-list-item').forEach(button => {\n    button.classList.remove('active_item');\n  });\n  event.target.classList.add('active_item');\n}\n\nasync function fetchDynamicApiUrl(event) {\n  if (event.target.classList.contains('filters-list-item')) {\n    togleActiveBtnClass(event);\n    const filter = event.target.dataset.filter;\n    const apiUrl = `https://energyflow.b.goit.study/api/filters?filter=${filter}&page=1&limit=${limit}`;\n\n    try {\n      const response = await fetch(apiUrl);\n      const data = await response.json();\n\n      if (data.results && data.results.length > 0) {\n        cardsContainer.innerHTML = renderCards(data.results);\n      } else {\n        console.error('No exercises found.');\n      }\n    } catch (error) {\n      console.error('Error fetching exercises:', error);\n    }\n  }\n}\n\nfunction renderCards(exercises) {\n  return exercises.reduce(\n    (html, card) =>\n      html +\n      `<li class=\"cards-list-item\" style=\"background:linear-gradient(\n      0deg,\n      rgba(16, 16, 16, 0.7) 0%,\n      rgba(16, 16, 16, 0.7) 100%\n    ), url('${card.imgUrl}'),\n    lightgray -16.825px -9.156px / 128.765% 116.922% no-repeat; background-size: cover;\">\n      <h3 class=\"card-title\">${firstLetterToUpper(card.name)}</h3>\n      <p class=\"card-subtitle\">${card.filter}</p>\n    </li>`,\n    ''\n  );\n}\n\ndocument.addEventListener('DOMContentLoaded', fetchDefaultApiUrl);\nfiltersBox.addEventListener('click', fetchDynamicApiUrl);\n"],"names":["modalWindow","modalEl","inputExID","exerciseID","exercise","exerciseCntrl","ExercisesController","fetchExerciseData","id","createMarkupModalEx","exerciseId","addFavBtn","urlIconAddRemove","textBtn","isExerciseInFavorites","getFavoriteExercises","error","closeModalOnEscape","event","closeModalOnMouse","storedExercisesString","updateFavoriteExercises","newExercises","favoriteExercises","favExercise","toggleFavorites","storedExercises","updatedExercises","ex","updateButtonUI","isFavorite","urlIcon","updatedAddFavBtn","filtersBox","cardsContainer","defaultFilterButton","defaultFilter","screenWidth","limit","limitPerScreenWidth","defaultApiUrl","fetchDefaultApiUrl","data","renderCards","togleActiveBtnClass","button","fetchDynamicApiUrl","apiUrl","exercises","html","card","firstLetterToUpper"],"mappings":"0FASA,MAAMA,EAAc,SAAS,cAAc,WAAW,EAChDC,EAAU,SAAS,cAAc,qBAAqB,EAE3C,SAAS,cAAc,YAAY,EACpD,IAAIC,EAAY,2BACZC,EAAa,GACbC,EAAW,CAAA,EAEXC,EAAgB,IAAIC,EAKxB,eAAeC,EAAkBC,EAAI,CACnC,OAAAL,EAAaK,EAEE,MADE,MAAMH,EAAc,gBAAgBF,CAAU,GACjC,MAEhC,CAIA,eAAeM,EAAoBC,EAAY,CAC7C,GAAI,CACF,MAAMN,EAAW,MAAMG,EAAkBG,CAAU,EAC7CC,EAAYV,EAAQ,cAAc,oBAAoB,EAEhE,IAAIW,EAAmB,GACnBC,EAAU,GACVT,GAAYU,EAAsBV,EAAUW,EAAsB,CAAA,GACpEH,EAAmB,gDACnBC,EAAU,0BAEVD,EAAmB,6CACnBC,EAAU,oBAGRZ,EAAQ,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQNG,EAAS,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAQYA,EAAS,IAAI;AAAA;AAAA,uCAEnBA,EAAS,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAoEbA,EAAS,MAAM;AAAA;AAAA;AAAA;AAAA,yCAIfA,EAAS,QAAQ;AAAA;AAAA;AAAA;AAAA,yCAIjBA,EAAS,SAAS;AAAA;AAAA;AAAA;AAAA,yCAIlBA,EAAS,UAAU;AAAA;AAAA;AAAA;AAAA,yCAInBA,EAAS,cAAc,IAAIA,EAAS,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAOnEA,EAAS,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQhBS,CAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BASKD,CAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAe3C,OAAQI,EAAO,CACd,QAAQ,MAAM,qCAAsCA,CAAK,CAC1D,CAEH,CAIAP,EAAoBP,CAAS,EAM7B,SAASe,EAAmBC,EAAM,CAC1BA,EAAM,MAAQ,WAChBlB,EAAY,UAAU,OAAO,SAAS,EACtC,OAAO,oBAAoB,UAAWiB,CAAkB,EAG9D,CACA,OAAO,iBAAiB,UAAWA,CAAkB,EAElD,SAASE,EAAkB,EAAG,EACxB,EAAE,OAAO,UAAU,QAAU,oBAAwB,EAAE,OAAO,UAAU,QAAU,sBACrFnB,EAAY,UAAU,OAAO,SAAS,EACtC,OAAO,oBAAoB,QAASmB,CAAiB,EAG3D,CACA,OAAO,iBAAiB,QAASA,CAAiB,EAIlD,SAASJ,GAAuB,CAC9B,MAAMK,EAAwB,aAAa,QAAQ,mBAAmB,EACtE,OAAOA,EAAwB,KAAK,MAAMA,CAAqB,EAAI,CAAA,CACrE,CACA,SAASC,EAAwBC,EAAc,CAC7C,aAAa,QAAQ,oBAAqB,KAAK,UAAUA,CAAY,CAAC,CACxE,CAEA,SAASR,EAAsBV,EAAUmB,EAAmB,CAC1D,OAAOA,EAAkB,KAAKC,GAAeA,EAAY,MAAQpB,EAAS,GAAG,CAC/E,CAMA,eAAeqB,GAAkB,CAC/B,GAAI,CAEGrB,EAAS,MACZA,EAAW,MAAMG,EAAkBJ,CAAU,GAI/C,MAAMuB,EAAkBX,IAKxB,GAFmBD,EAAsBV,EAAUsB,CAAe,EAElD,CAEd,MAAMC,EAAmBD,EAAgB,OAAOE,GAAMA,EAAG,MAAQxB,EAAS,GAAG,EAC7EiB,EAAwBM,CAAgB,EACxCE,EAAe,EAAK,EACpB,QAAQ,IAAI,mCAAoCzB,CAAQ,CAC9D,MAEMsB,EAAgB,KAAKtB,CAAQ,EAC7BiB,EAAwBK,CAAe,EACvCG,EAAe,EAAI,EACnB,QAAQ,IAAI,+BAAgCzB,CAAQ,CAEvD,OAAQY,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CACjD,CACH,CAIA,SAAS,iBAAiB,QAAS,SAAUE,EAAO,CAC9CA,EAAM,OAAO,UAAU,SAAS,cAAc,GAEhDO,GAEJ,CAAC,EAMD,SAASI,EAAeC,EAAY,CAC/B,MAAMC,EAAUD,EAAa,gDAAkD,6CAC5EjB,EAAUiB,EAAa,wBAA0B,mBACjDE,EAAmB/B,EAAQ,cAAc,oBAAoB,EACnE,QAAQ,IAAI,aAAc6B,CAAU,EAClCE,EAAiB,UAAY,2DAA2DnB,CAAO,iKAAiKkB,CAAO,6BAC3Q,CC9RA,MAAME,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAiB,SAAS,eAAe,YAAY,EACrDC,EAAsBF,EAAW,cAAc,oBAAoB,EACnEG,EAAgBD,EAAoB,QAAQ,OAE5CE,EAAc,OAAO,WAE3B,IAAIC,EACJC,EAAoBF,CAAW,EAE/B,MAAMG,EAAgB,sDAAsDJ,CAAa,iBAAiBE,CAAK,GAE/G,SAASC,EAAoBF,EAAa,CACxC,OAAIA,EAAc,IAEhBC,EAAQ,GACCD,GAAe,KAAOA,EAAc,KAE7CC,EAAQ,IAKHA,CACT,CAEA,eAAeG,GAAqB,CAClC,GAAI,CAEF,MAAMC,EAAO,MADI,MAAM,MAAMF,CAAa,GACd,OAExBE,EAAK,SAAWA,EAAK,QAAQ,OAAS,EACxCR,EAAe,UAAYS,EAAYD,EAAK,OAAO,EAEnD,QAAQ,MAAM,qBAAqB,CAEtC,OAAQ1B,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CACjD,CACH,CAEA,SAAS4B,EAAoB1B,EAAO,CAClCe,EAAW,iBAAiB,oBAAoB,EAAE,QAAQY,GAAU,CAClEA,EAAO,UAAU,OAAO,aAAa,CACzC,CAAG,EACD3B,EAAM,OAAO,UAAU,IAAI,aAAa,CAC1C,CAEA,eAAe4B,EAAmB5B,EAAO,CACvC,GAAIA,EAAM,OAAO,UAAU,SAAS,mBAAmB,EAAG,CACxD0B,EAAoB1B,CAAK,EAEzB,MAAM6B,EAAS,sDADA7B,EAAM,OAAO,QAAQ,MACuC,iBAAiBoB,CAAK,GAEjG,GAAI,CAEF,MAAMI,EAAO,MADI,MAAM,MAAMK,CAAM,GACP,OAExBL,EAAK,SAAWA,EAAK,QAAQ,OAAS,EACxCR,EAAe,UAAYS,EAAYD,EAAK,OAAO,EAEnD,QAAQ,MAAM,qBAAqB,CAEtC,OAAQ1B,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CACjD,CACF,CACH,CAEA,SAAS2B,EAAYK,EAAW,CAC9B,OAAOA,EAAU,OACf,CAACC,EAAMC,IACLD,EACA;AAAA;AAAA;AAAA;AAAA,cAIQC,EAAK,MAAM;AAAA;AAAA,+BAEMC,EAAmBD,EAAK,IAAI,CAAC;AAAA,iCAC3BA,EAAK,MAAM;AAAA,WAExC,EACJ,CACA,CAEA,SAAS,iBAAiB,mBAAoBT,CAAkB,EAChER,EAAW,iBAAiB,QAASa,CAAkB"}