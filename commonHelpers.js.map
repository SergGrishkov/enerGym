{"version":3,"file":"commonHelpers.js","sources":["../src/helpers/render.js","../src/js/favorites.js"],"sourcesContent":["import { firstLetterToUpper } from './utils';\n\nexport function renderFavoriteCards(arrayCards) {\n  if (arrayCards) {\n    return arrayCards.reduce((acc, prev) => {\n      return (\n        acc +\n        `\n    <li class=\"favorite-item\" data-exerciseId=\"${prev._id}\">\n                <div class=\"favorite-label-drop-start\">\n                    <p class=\"favorite-label-workout\">WORKOUT</p>\n                    <button class=\"favorite-remove-btn\">\n                        <svg class=\"remove-favorites\" width=\"16\" height=\"16\" aria-label=\"icon-bucket\">\n                          <use href=\"./sprite.svg#icon-remove-favorites\"></use>\n                        </svg>\n                    </button>\n                    <button class=\"favorite-start-btn\">Start\n                        <svg class=\"favorites-icon\" width=\"14\" height=\"14\" aria-label=\"start-arrow\">\n                            <use href=\"./sprite.svg#icon-exercises-arrow\"></use>\n                        </svg>\n                    </button>\n                </div>\n                <div class=\"favorite-label-icon-run\">\n                    <svg class=\"favorite-icon-run\" width=\"24\" height=\"24\" aria-label=\"icon-bucket\">\n                        <use href=\"./sprite.svg#icon-exercises-man\"></use>\n                    </svg>\n                    <p>${firstLetterToUpper(prev.name)}</p>\n                </div>\n                <div class=\"favorite-label-burn\">\n                    <p>Burned calories:</p>\n                    <span>${prev.burnedCalories} / ${prev.time} min</span>\n                    <p>Body part:</p>\n                    <span>${firstLetterToUpper(prev.bodyPart)}</span>\n                    <p>Target:</p>\n                    <span>${firstLetterToUpper(prev.target)}</span>\n                </div>\n            </li>\n    `\n      );\n    }, '');\n  } else {\n    return `\n    <div class=\"missing-cards\">\n            <img src=\"./dumbbell@1x.png\" alt=\"dumbbell-img\">\n            <p>It appears that you haven't added any exercises to your favorites yet. To get started, you can add\n                exercises that you\n                like to your favorites for easier access in the future.</p>\n        </div>\n    `;\n  }\n}\n","import { ExercisesController } from '../api/controllers/ExercisesController';\nimport { renderFavoriteCards } from '../helpers/render';\nimport {\n  getFavoritCardsFromLocalStorage,\n  isExerciseInFavorite,\n  removeExerciseFromFavoriteById,\n} from '../helpers/locatStorage';\nimport { splitArraytoParts } from '../helpers/utils';\nimport { renderPagination } from './pagination';\nimport { createMarkupModalEx } from './modal-exercise.js';\n\nconst exerciseCntrl = new ExercisesController();\nlet exercise;\nconst chunk = 8;\n\nconst listFavorites = document.querySelector(\n  '.favorites-container-content-items'\n);\nconst paginationList = document.querySelector('.pagination-list');\n\nconst chunkArrayLs = splitArraytoParts(\n  getFavoritCardsFromLocalStorage(),\n  chunk\n);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (window.innerWidth <= 767) {\n    let cards = splitArraytoParts(getFavoritCardsFromLocalStorage(), chunk)[0]\n    listFavorites.innerHTML = renderFavoriteCards(cards);\n    paginationList.innerHTML = renderPagination(chunkArrayLs.length, 1);\n  } else {\n    const favoriteInfoLs = renderFavoriteCards(getFavoritCardsFromLocalStorage());\n    listFavorites.innerHTML = favoriteInfoLs;\n  }\n});\n\n\nwindow.addEventListener('resize', ()=> {\n  if (window.matchMedia(\"(max-width: 767px)\").matches) {\n    let cards = splitArraytoParts(getFavoritCardsFromLocalStorage(), chunk)[0]\n    listFavorites.innerHTML = renderFavoriteCards(cards);\n    paginationList.innerHTML = renderPagination(chunkArrayLs.length, 1);\n  } else {\n    const favoriteInfoLs = renderFavoriteCards(getFavoritCardsFromLocalStorage());\n    listFavorites.innerHTML = favoriteInfoLs;\n    paginationList.innerHTML = '';\n  }\n \n})\n\nlistFavorites.addEventListener('click', async e => {\n  if (\n    e.target.ariaLabel !== 'icon-bucket' &&\n    e.target.className !== 'favorite-remove-btn' &&\n    e.target.className !== 'favorite-start-btn' &&\n    e.target.ariaLabel !== 'start-arrow'\n  )\n    return;\n\n  let id = Object.values(e.target.closest('[data-exerciseId]').dataset)[0];\n\n  if (\n    e.target.ariaLabel === 'icon-bucket' ||\n    e.target.className === 'favorite-remove-btn'\n  ) {\n    try {\n      if (isExerciseInFavorite(id)) {\n        removeExerciseFromFavoriteById(id);\n        document.querySelector(`[data-exerciseId=\"${id}\"]`).remove();\n      }\n      if(!getFavoritCardsFromLocalStorage()) {\n        paginationList.innerHTML = '';\n        window.location.reload();\n      }\n    } catch (error) {\n      console.log(`Exercise with ${id} can't be removed`, error);\n    }\n  }\n\n  if (\n    e.target.className === 'favorite-start-btn' ||\n    e.target.ariaLabel === 'start-arrow'\n  ) {\n    const exerciseInfo = await exerciseCntrl.getExerciseById(id);\n    createMarkupModalEx(exerciseInfo.json());\n  }\n});\n\npaginationList.addEventListener('click', getCurrentPage);\n\nfunction getCurrentPage(event) {\n  if (event.target.tagName === 'LI') {\n    console.log(event.target.value);\n    paginationList.innerHTML = renderPagination(\n      chunkArrayLs.length,\n      event.target.value\n    );\n    listFavorites.innerHTML = renderFavoriteCards(chunkArrayLs[event.target.value - 1]);\n  }\n}\n"],"names":["renderFavoriteCards","arrayCards","acc","prev","firstLetterToUpper","exerciseCntrl","ExercisesController","chunk","listFavorites","paginationList","chunkArrayLs","splitArraytoParts","getFavoritCardsFromLocalStorage","cards","renderPagination","favoriteInfoLs","id","isExerciseInFavorite","removeExerciseFromFavoriteById","error","exerciseInfo","createMarkupModalEx","getCurrentPage","event"],"mappings":"yIAEO,SAASA,EAAoBC,EAAY,CAC9C,OAAIA,EACKA,EAAW,OAAO,CAACC,EAAKC,IAE3BD,EACA;AAAA,iDACyCC,EAAK,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAkBhCC,EAAmBD,EAAK,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA,4BAI1BA,EAAK,cAAc,MAAMA,EAAK,IAAI;AAAA;AAAA,4BAElCC,EAAmBD,EAAK,QAAQ,CAAC;AAAA;AAAA,4BAEjCC,EAAmBD,EAAK,MAAM,CAAC;AAAA;AAAA;AAAA,MAKpD,EAAE,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASX,CCvCA,MAAME,EAAgB,IAAIC,EAEpBC,EAAQ,EAERC,EAAgB,SAAS,cAC7B,oCACF,EACMC,EAAiB,SAAS,cAAc,kBAAkB,EAE1DC,EAAeC,EACnBC,EAAiC,EACjCL,CACF,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,GAAI,OAAO,YAAc,IAAK,CAC5B,IAAIM,EAAQF,EAAkBC,EAAiC,EAAEL,CAAK,EAAE,CAAC,EACzEC,EAAc,UAAYR,EAAoBa,CAAK,EACnDJ,EAAe,UAAYK,EAAiBJ,EAAa,OAAQ,CAAC,CACtE,KAAS,CACL,MAAMK,EAAiBf,EAAoBY,EAA+B,CAAE,EAC5EJ,EAAc,UAAYO,CAC3B,CACH,CAAC,EAGD,OAAO,iBAAiB,SAAU,IAAK,CACrC,GAAI,OAAO,WAAW,oBAAoB,EAAE,QAAS,CACnD,IAAIF,EAAQF,EAAkBC,EAAiC,EAAEL,CAAK,EAAE,CAAC,EACzEC,EAAc,UAAYR,EAAoBa,CAAK,EACnDJ,EAAe,UAAYK,EAAiBJ,EAAa,OAAQ,CAAC,CACtE,KAAS,CACL,MAAMK,EAAiBf,EAAoBY,EAA+B,CAAE,EAC5EJ,EAAc,UAAYO,EAC1BN,EAAe,UAAY,EAC5B,CAEH,CAAC,EAEDD,EAAc,iBAAiB,QAAS,MAAM,GAAK,CACjD,GACE,EAAE,OAAO,YAAc,eACvB,EAAE,OAAO,YAAc,uBACvB,EAAE,OAAO,YAAc,sBACvB,EAAE,OAAO,YAAc,cAEvB,OAEF,IAAIQ,EAAK,OAAO,OAAO,EAAE,OAAO,QAAQ,mBAAmB,EAAE,OAAO,EAAE,CAAC,EAEvE,GACE,EAAE,OAAO,YAAc,eACvB,EAAE,OAAO,YAAc,sBAEvB,GAAI,CACEC,EAAqBD,CAAE,IACzBE,EAA+BF,CAAE,EACjC,SAAS,cAAc,qBAAqBA,CAAE,IAAI,EAAE,UAElDJ,EAA+B,IACjCH,EAAe,UAAY,GAC3B,OAAO,SAAS,SAEnB,OAAQU,EAAO,CACd,QAAQ,IAAI,iBAAiBH,CAAE,oBAAqBG,CAAK,CAC1D,CAGH,GACE,EAAE,OAAO,YAAc,sBACvB,EAAE,OAAO,YAAc,cACvB,CACA,MAAMC,EAAe,MAAMf,EAAc,gBAAgBW,CAAE,EAC3DK,EAAoBD,EAAa,KAAI,CAAE,CACxC,CACH,CAAC,EAEDX,EAAe,iBAAiB,QAASa,CAAc,EAEvD,SAASA,EAAeC,EAAO,CACzBA,EAAM,OAAO,UAAY,OAC3B,QAAQ,IAAIA,EAAM,OAAO,KAAK,EAC9Bd,EAAe,UAAYK,EACzBJ,EAAa,OACba,EAAM,OAAO,KACnB,EACIf,EAAc,UAAYR,EAAoBU,EAAaa,EAAM,OAAO,MAAQ,CAAC,CAAC,EAEtF"}